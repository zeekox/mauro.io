<!DOCTYPE html><!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]--><!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]--><!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]--><!--[if gt IE 8]><!--><html class=no-js><!--<![endif]--><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>You need a Backup</title><meta name=description content="Mauro Carabotti's Personal Page"><meta name=viewport content="width=device-width,initial-scale=1"><!-- Place favicon.ico and apple-touch-icon.png in the root directory --><link rel=stylesheet href=/css/main.4a53.css><script src=/js/head-scripts.7d72.js></script></head><body><!--[if lt IE 7]>
        <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]--><div class=mauroio><header><a href="/"><h1>mauro.io</h1></a></header><section><section class=post><header><h2>You need a Backup</h2><time datetime=2014-03-09T00:00:00+01:00>9 march 2014</time></header><article><p><strong>UPDATE</strong>: I now use a simple external disk to store my backups, the script support both modes, ssh or local target.</p><p>You need a Backup and everyone does. Some reasons for it that I find important and wisdom gathered from colleagues.</p><ol><li><p>I you use a NAS (with or without RAID) or some other system using proprietary software, be sure to be able to mount your disks without it.</p></li><li><p>Don’t use backup software creating copies you can only read with THAT software. Create your own full copies, readable from any computer (after properly mounting it).</p></li><li><p>Be sure to be able to read your disks without your NAS. So mount it on an other computer before copying your whole life on it.</p></li><li><p>A good NAS with RAID 1 is great but not fire proof. Copy your files to an external drive that you store at an other location (for example at work).</p></li><li><p>Don’t overwrite a single backup copy, if it is corrupt you lost all backups. Use backup rotation, to store for example the last five copies or more. With this kind of solution you can also go back in time if your overwrite some files or need a previous version of some piece of data.</p></li><li><p>Use hard-links to save space if you can. Storing full copies of your data is space consuming, creating hard-links for files that did not change since last backup save a lot of disk-space.</p></li><li><p>You will not forget automated backups, run automatic backups regularly so you don’t need to think about it. But make sure you are informed when backup fails.</p></li></ol><h2 id=my-setup>My Setup</h2><p>I wanted redundancy and find external hard drive good but you can still easily fall down, in addition I wanted an automated solution and if you need to plug your hard drive first I don’t call it automatic.</p><p>The <a href=http://www.synology.com/en-global/products/overview/DS214+>Synology DS214+</a> is my choice, it’s a little bit overkill and a less expensive 2-bay NAS would do it, but this one looks great!</p><p>I configured it in RAID-1 because and don’t want to rely on Synology Hybrid Raid technology so that I can mount the disks in another computer (see point 4 above).</p><p>Then I configured my NAS to be allow SSH connections, and uploaded my public key so that the connection does not require a password.</p><p>Finally a wrote a <a href=https://github.com/zeekox/configs/blob/puzzle/utils/rsync_backup>rsync based script</a> to perform the rotating backups over SSH (the script would also work to store the backups locally). And programmed it to run periodically using CRON.</p><p>As I don’t wanted my NAS to run all day for nothing I configured it to started only a couple of ours some days of the week and configured the CRON entry to match those days. I also investigated a solution where I would start the NAS with Wake On Lan and stop it after the backup is performed.</p></article></section></section><footer>Fork me on <a href=https://github.com/zeekox/mauro.io>GitHub</a> - Licence <a rel=license href="http://creativecommons.org/licenses/by-nc-sa/3.0/">CC BY-NC-SA</a></footer></div><script src=//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js></script><script>window.jQuery || document.write('<script src="/_bower_components/jquery.js"><\/script>')</script><script src=/js/script.290e.js></script></body></html>